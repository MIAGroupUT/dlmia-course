

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Tutorial 1 &#8212; Deep Learning in 3D Medical Image Analysis</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" href="../../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"TeX": {"Macros": {"N": "\\mathbb{N}", "floor": ["\\lfloor#1\\rfloor", 1], "bmat": ["\\left[\\begin{array}"], "emat": ["\\end{array}\\right]"]}}, "options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="canonical" href="https://utwente.mia.nl/template/notebooks/Tutorial1_NumpySimpleITK/Tutorial1_NumpySimpleITK_teacher.html" />
    <link rel="shortcut icon" href="https://www.utwente.nl/.utdesign/img/favicons/favicon-32x32.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Tutorial 2" href="../Tutorial2_ConvolutionalNeuralNetworks/Tutorial2_ConvolutionalNeuralNetworks_teacher.html" />
    <link rel="prev" title="Welcome" href="../../index.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
    
    
      
    
    
    <img src="../../_static/UT_logo.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../../_static/UT_logo.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Tutorial 1</a></li>


<li class="toctree-l1"><a class="reference internal" href="../Tutorial2_ConvolutionalNeuralNetworks/Tutorial2_ConvolutionalNeuralNetworks_teacher.html">Tutorial 2</a></li>



<li class="toctree-l1"><a class="reference internal" href="../Tutorial3_Segmentation/Tutorial3_Segmentation_teacher.html">Tutorial 3</a></li>




<li class="toctree-l1"><a class="reference internal" href="../Tutorial4_Generative_Models/Tutorial4_Generative_Models_teacher.html">Tutorial 4</a></li>


<li class="toctree-l1"><a class="reference internal" href="../Tutorial5_Reconstruction/Tutorial5_Reconstruction_student.html">Tutorial 5</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://jupyter.utwente.nl/hub/user-redirect/git-pull?repo=https%3A//github.com/MIAGroupUT/dlmia-course&urlpath=lab/tree/dlmia-course/jupyter-book/notebooks/Tutorial1_NumpySimpleITK/Tutorial1_NumpySimpleITK_teacher.ipynb&branch=main" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onJupyterHub"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="../../_static/images/logo_jupyterhub.svg">
  </span>
<span class="btn__text-container">JupyterHub</span>
</a>
</li>
      
      
      
      
      <li><a href="https://colab.research.google.com/github/MIAGroupUT/dlmia-course/blob/main/jupyter-book/notebooks/Tutorial1_NumpySimpleITK/Tutorial1_NumpySimpleITK_teacher.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onColab"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="../../_static/images/logo_colab.png">
  </span>
<span class="btn__text-container">Colab</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/MIAGroupUT/dlmia-course" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/MIAGroupUT/dlmia-course/issues/new?title=Issue%20on%20page%20%2Fnotebooks/Tutorial1_NumpySimpleITK/Tutorial1_NumpySimpleITK_teacher.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/notebooks/Tutorial1_NumpySimpleITK/Tutorial1_NumpySimpleITK_teacher.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Tutorial 1</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Tutorial 1</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#february-7-2025">February 7, 2025</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#notebooks">Notebooks</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#python-essentials">Python essentials</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#variables">Variables</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#functions">Functions</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#objects">Objects</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tuples-lists-and-sets">Tuples, lists and sets</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dictionaries">Dictionaries</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#working-with-medical-images">Working with medical images</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#python-packages">Python packages</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#loading-an-image">Loading an image</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#physical-voxel-size">Physical voxel size</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#visualizing-an-image">Visualizing an image</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#image-intensities">Image intensities</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#mevislab">MeVisLab</a></li>
</ul>
</li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="tutorial-1">
<h1>Tutorial 1<a class="headerlink" href="#tutorial-1" title="Permalink to this heading">#</a></h1>
<section id="february-7-2025">
<h2>February 7, 2025<a class="headerlink" href="#february-7-2025" title="Permalink to this heading">#</a></h2>
<p>Throughout the course, you will be doing a lot of Python programming and working with medical images.  We have included this tutorial to get you started with some of the basics. You might find more materials in <a class="reference external" href="https://miagrouput.github.io/intro-programming/">this manual</a> for Python programming, including additional exercises.</p>
<section id="notebooks">
<h3>Notebooks<a class="headerlink" href="#notebooks" title="Permalink to this heading">#</a></h3>
<p>What you are looking at right now is called a Jupyter notebook. We will use these for all tutorials in the course. A notebook is a mixture of Markdown cells (with code and figures) and code cells. There is a Python kernel running in the background that can execute your code cells, and keeps track of your variables. This is a bit like a workspace in Matlab.</p>
<p>There are multiple ways in which you can run a Jupyter notebook.</p>
<ul class="simple">
<li><p>You can install a Python distribution like <a class="reference external" href="https://www.anaconda.com/products/distribution">Anaconda</a> locally on your own computer and use <a class="reference external" href="https://jupyter.org/">JupyterLab</a> to open this notebook in your browser.</p></li>
<li><p>You can use <a class="reference external" href="https://colab.research.google.com">Google Colab</a> to run your notebook in the cloud, attached to your Google account.</p></li>
<li><p>A (preferred) alternative to Google Colab is to run the notebook on the <a class="reference external" href="https://jupyter.utwente.nl/">UT JupyterLab</a>. Here, you can log in with your s-number and you get your own hosted Jupyter environment.</p></li>
<li><p>You can run a notebook in an IDE like Visual Studio Code.</p></li>
</ul>
<div class="warning admonition">
<p class="admonition-title">Start</p>
<p>Actually, you are now likely looking at an HTML version of the notebook. To actually be able to do something, you can either download this notebook to run it locally or somewhere else by clicking on the download button, or run it directly by clicking the little rocket button in the top right and select JupyterHub (preferred) or Colab.</p>
</div>
<!-- In the past two lectures, we have looked at medical images, filters, neural networks, and convolutional neural networks. The purpose of this tutorial is to put the concepts that you have learned into practice and to get you acquainted with medical image formats and several useful Python packages to manipulate medical images. Moreover, you will get to train your first neural network for image analysis. -->
<p>To run a cell, you simply put the cursor in the cell and press <kbd>Shift</kbd> + <kbd>Enter</kbd>. For example, you can run the following cell, and (if all is well) the answer should appear below.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="mi">1</span><span class="o">+</span><span class="mi">1</span>
</pre></div>
</div>
</div>
</div>
<p>Throughout the tutorials, there are exercises, clearly indicated in green.</p>
</section>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="python-essentials">
<h1>Python essentials<a class="headerlink" href="#python-essentials" title="Permalink to this heading">#</a></h1>
<p>For the tutorials, we assume that you have some familiarity with Python and its syntax. If not, there are plenty of resources available online. If you’re an avid MATLAB user taking your first steps in Python, <a class="reference external" href="https://numpy.org/doc/stable/user/numpy-for-matlab-users.html">this resource</a> might be useful.</p>
<p>However, to help you out a bit, we here give a brief introduction to some Python essentials.</p>
<section id="variables">
<h2>Variables<a class="headerlink" href="#variables" title="Permalink to this heading">#</a></h2>
<p>Like in any programming language, we can store values in containers, which we call variables. For example, we can assign the value <code class="docutils literal notranslate"><span class="pre">5</span></code> to variable <code class="docutils literal notranslate"><span class="pre">a</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="mi">5</span>
</pre></div>
</div>
</div>
</div>
<p>Variables can represent a number, a letter, a string, or anything else.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">b</span> <span class="o">=</span> <span class="mf">2.3</span>
<span class="n">course</span> <span class="o">=</span> <span class="s1">&#39;DLMIA&#39;</span>
<span class="n">year</span> <span class="o">=</span> <span class="mi">2023</span>
<span class="n">letter</span> <span class="o">=</span> <span class="s1">&#39;g&#39;</span>
</pre></div>
</div>
</div>
</div>
<p>You can do anything you want with these variables. For example, you can add two variables to make a new variable</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">c</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
</pre></div>
</div>
</div>
</div>
<p>Run the cell below to check what the current value of <code class="docutils literal notranslate"><span class="pre">c</span></code> is</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">c</span>
</pre></div>
</div>
</div>
</div>
<p>Python does not require you to explicitly declare the type of a variable. However, under the hood, variables do have a type. If you want to work with variables, be aware that they have to be of the same type.</p>
<div class="tip admonition">
<p class="admonition-title">Exercise</p>
<p>What happens if you try to add variables <code class="docutils literal notranslate"><span class="pre">c</span></code> and <code class="docutils literal notranslate"><span class="pre">course</span></code>. Do you understand what it says in the output?</p>
</div>
<div class="dropdown admonition">
<p class="admonition-title">Answer</p>
<div class="seealso admonition">
<p class="admonition-title">Answer</p>
<p>The code will give an error, we cannot add <code class="docutils literal notranslate"><span class="pre">float</span></code> and <code class="docutils literal notranslate"><span class="pre">str</span></code> types.</p>
</div>
</div>
<p>If you are not sure which type a variable has, you can always check it using <code class="docutils literal notranslate"><span class="pre">type</span></code>, as below.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">type</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>A <code class="docutils literal notranslate"><span class="pre">float</span></code> is one way to represent numbers. Floats have decimals, and hence, Python automatically turns your variable <code class="docutils literal notranslate"><span class="pre">b</span></code> with value 2.3 into a float.</p>
<div class="tip admonition">
<p class="admonition-title">Exercise</p>
<p>What is the type of the variable <code class="docutils literal notranslate"><span class="pre">year</span></code>?</p>
</div>
<div class="dropdown admonition">
<p class="admonition-title">Answer</p>
<div class="seealso admonition">
<p class="admonition-title">Answer</p>
<p>The type of the variable <code class="docutils literal notranslate"><span class="pre">year</span></code> is <code class="docutils literal notranslate"><span class="pre">int</span></code>.</p>
</div>
</div>
<div class="tip admonition">
<p class="admonition-title">Exercise</p>
<p>types are compatible with each other. Can you figure out what type the variable has that you get when you add <code class="docutils literal notranslate"><span class="pre">year</span></code> and <code class="docutils literal notranslate"><span class="pre">b</span></code>?.</p>
</div>
<div class="dropdown admonition">
<p class="admonition-title">Answer</p>
<div class="seealso admonition">
<p class="admonition-title">Answer</p>
<p><code class="docutils literal notranslate"><span class="pre">d</span> <span class="pre">=</span> <span class="pre">b</span> <span class="pre">+</span> <span class="pre">year</span></code> gives a variable of type <code class="docutils literal notranslate"><span class="pre">float</span></code>.</p>
</div>
</div>
<p>If your variable has one type but you want it to have another type, you can ‘cast’ it to another type as follows</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">float</span><span class="p">(</span><span class="n">year</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>This doesn’t always work, but only for types that can be cast into each other. For example, the following should give you an error</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">float</span><span class="p">(</span><span class="n">letter</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Variable names are case-sensitive. This means that while <code class="docutils literal notranslate"><span class="pre">b=2.3</span></code>, variable <code class="docutils literal notranslate"><span class="pre">B</span></code> is actually undefined. Try it out yourself</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">B</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="functions">
<h2>Functions<a class="headerlink" href="#functions" title="Permalink to this heading">#</a></h2>
<p>A function is a block of code that only runs when it’s called. The benefit of defining a function is that - if you have to use a piece of code many times - you can easily call it. For example, we can define a function that just says ‘Hello world’.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">greet</span><span class="p">():</span>
    <span class="k">return</span> <span class="s1">&#39;Hello world&#39;</span>
</pre></div>
</div>
</div>
</div>
<p>If you run the cell above, you’ll notice that there is no output. That is because the function is not called. To actually see some output we need to call the function like this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">greet</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Functions can also have arguments. For example, the function below takes two arguments <code class="docutils literal notranslate"><span class="pre">a</span></code> and <code class="docutils literal notranslate"><span class="pre">b</span></code> and adds these. Note that <code class="docutils literal notranslate"><span class="pre">a</span></code> and <code class="docutils literal notranslate"><span class="pre">b</span></code> are just the names of the variables within the function, i.e., within its scope. The function also has a <code class="docutils literal notranslate"><span class="pre">return</span></code> statement, to define what should be its output.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">add_numbers</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
</pre></div>
</div>
</div>
</div>
<div class="dropdown admonition">
<p class="admonition-title">Answer</p>
<div class="seealso admonition">
<p class="admonition-title">Answer</p>
<p>Just call <code class="docutils literal notranslate"><span class="pre">add_numbers(45,</span> <span class="pre">1281)</span></code>.</p>
</div>
</div>
<p>Of course, functions can be much more complex than this. We can make new variables within a function and call one function from another function. For example</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">multiply_numbers</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span>

<span class="k">def</span> <span class="nf">my_function</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
    <span class="n">d</span> <span class="o">=</span> <span class="n">add_numbers</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">multiply_numbers</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>

<span class="n">my_function</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>The sky is the limit. We can put <code class="docutils literal notranslate"><span class="pre">if</span></code>, <code class="docutils literal notranslate"><span class="pre">elif</span></code> and <code class="docutils literal notranslate"><span class="pre">else</span></code> statements in a function, make <code class="docutils literal notranslate"><span class="pre">for</span></code> loops and even call a function from within that same function (recursiveness). For example, we can easily write a function that computes the factorial of a number, i.e., <span class="math notranslate nohighlight">\(a!\)</span>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">factorial</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">a</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">a</span> <span class="o">*</span> <span class="n">factorial</span><span class="p">(</span><span class="n">a</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">1</span>
    
<span class="n">factorial</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>One important thing to consider when working with functions (and classes) is the scope of a variable. If you define a variable in a function, it will cease to exist when the function is executed. Let’s look at the simple example below. If we run this cell, we get an error which says that in the global scope, <code class="docutils literal notranslate"><span class="pre">u</span></code> is not defined.</p>
<p>(Note that the function below does not have a <code class="docutils literal notranslate"><span class="pre">return</span></code> statement. If we leave this out and we don’t want to return anything, Python will just add <code class="docutils literal notranslate"><span class="pre">return</span> <span class="pre">None</span></code> for us.)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">manipulate</span><span class="p">():</span>
    <span class="n">u</span> <span class="o">=</span> <span class="mi">8</span>

<span class="n">u</span>
</pre></div>
</div>
</div>
</div>
<p>Conversely, if you define a variable globally, you can read it from within a function, but you cannot change it. Let’s look at a very simple example to demonstrate this. In principe, the function <code class="docutils literal notranslate"><span class="pre">change_e</span></code> should set the value of variable <code class="docutils literal notranslate"><span class="pre">e</span></code> to that of <code class="docutils literal notranslate"><span class="pre">f</span></code>. However, because <code class="docutils literal notranslate"><span class="pre">e</span></code> is a global variable, we’re not allowed to change it from within this function.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">e</span> <span class="o">=</span> <span class="mi">4</span>

<span class="k">def</span> <span class="nf">change_e</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
    <span class="n">e</span> <span class="o">=</span> <span class="n">f</span>

<span class="n">change_e</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<span class="n">e</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="objects">
<h2>Objects<a class="headerlink" href="#objects" title="Permalink to this heading">#</a></h2>
<p>Another essential building block of Python are its objects. In Python, everything is an object. In practice this means that any variable you use has <em>attributes</em> and <em>methods</em>. You can easily define your own objects by defining a class. An object is nothing more than an instance of such a class. Take for example cars. There are many kinds of cars, but we can come up with a class that captures the general idea of a car with attributed and methods:</p>
<ul class="simple">
<li><p><strong>Attributes</strong> Color, brand, speed</p></li>
<li><p><strong>Methods</strong> Accelerate, slow down</p></li>
</ul>
<p>We can put this in code:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Car</span><span class="p">:</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="n">brand</span><span class="p">,</span> <span class="n">speed</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">color</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">brand</span> <span class="o">=</span> <span class="n">brand</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">speed</span> <span class="o">=</span> <span class="n">speed</span>
    
    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Toot toot, I am the fastest </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">brand</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>        
        
    <span class="k">def</span> <span class="nf">accelerate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">speed</span> <span class="o">+=</span> <span class="mi">1</span>
        
    <span class="k">def</span> <span class="nf">slow_down</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">speed</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">speed</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>      
</pre></div>
</div>
</div>
</div>
<p>There are some important things here:</p>
<ul class="simple">
<li><p>By convention, we capitalize class names.</p></li>
<li><p>Every class has an <code class="docutils literal notranslate"><span class="pre">__init__</span></code> method/function. This is a function that is called if we instantiate an object of that class. The first argument of the <code class="docutils literal notranslate"><span class="pre">__init__</span></code> function is <code class="docutils literal notranslate"><span class="pre">self</span></code>, and we can use this function to set the attribute values of the object. In this case, <code class="docutils literal notranslate"><span class="pre">color</span></code>, <code class="docutils literal notranslate"><span class="pre">brand</span></code>, and <code class="docutils literal notranslate"><span class="pre">speed</span></code>.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">__init__</span></code> method of this class has four arguments, but we provide a default value for <code class="docutils literal notranslate"><span class="pre">speed</span></code>, namely <code class="docutils literal notranslate"><span class="pre">0</span></code>. This means that if we call the <code class="docutils literal notranslate"><span class="pre">__init__</span></code> function (by instantiating an object), we don’t necessarily have to provide a value for this argument (but we can if we want).</p></li>
<li><p>This class also has a <code class="docutils literal notranslate"><span class="pre">__call__</span></code> function that allows us to call the class like a function.</p></li>
<li><p>This class has two other methods: <code class="docutils literal notranslate"><span class="pre">accelerate</span></code> and <code class="docutils literal notranslate"><span class="pre">slow_down</span></code>. In these methods, we can change the attributes of the class, but only if we prepend the attribute name with <code class="docutils literal notranslate"><span class="pre">self.</span></code>.</p></li>
<li><p>In the <code class="docutils literal notranslate"><span class="pre">slow_down</span></code> function, we use a so-called <code class="docutils literal notranslate"><span class="pre">built-in</span></code> function, namely <code class="docutils literal notranslate"><span class="pre">max</span></code>. This is a function that you don’t have to explicitly define or import, it’s just there. In this case, it makes sure that we can’t have a negative speed.</p></li>
</ul>
<p>Now, let’s initialize Jelmer’s car which is just standing still in the parking lot. We can do this by calling the class (just like we’d call a function) with arguments. This way, we indirectly call its <code class="docutils literal notranslate"><span class="pre">__init__</span></code> function. Also, we use the built-in <code class="docutils literal notranslate"><span class="pre">print</span></code> function to print its current speed.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">jelmers_car</span> <span class="o">=</span> <span class="n">Car</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">,</span> <span class="n">brand</span><span class="o">=</span><span class="s1">&#39;skoda&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">jelmers_car</span><span class="o">.</span><span class="n">speed</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Now, we can make the car go faster by calling its <code class="docutils literal notranslate"><span class="pre">accelerate</span></code> function, slow down using its <code class="docutils literal notranslate"><span class="pre">slow_down</span></code> function (note how the speed stays non-negative), and honk it’s horn via its <code class="docutils literal notranslate"><span class="pre">__call__</span></code> function.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">jelmers_car</span><span class="o">.</span><span class="n">accelerate</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">jelmers_car</span><span class="o">.</span><span class="n">speed</span><span class="p">)</span>
<span class="n">jelmers_car</span><span class="o">.</span><span class="n">slow_down</span><span class="p">()</span>
<span class="n">jelmers_car</span><span class="o">.</span><span class="n">slow_down</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">jelmers_car</span><span class="o">.</span><span class="n">speed</span><span class="p">)</span>

<span class="c1"># To call the __call__ function, we just pretend the object is a function</span>
<span class="n">jelmers_car</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>The nice thing with classes is that if we want to represent Dieuwertje’s car driving on the A35, we can just make another object using the same class.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dieuwertjes_car</span> <span class="o">=</span> <span class="n">Car</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;gold&#39;</span><span class="p">,</span> <span class="n">brand</span><span class="o">=</span><span class="s1">&#39;hyundai&#39;</span><span class="p">,</span> <span class="n">speed</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>We have now created variables which are just objects of the type <code class="docutils literal notranslate"><span class="pre">Car</span></code>, similarly to variables of built-in types <code class="docutils literal notranslate"><span class="pre">float</span></code>, <code class="docutils literal notranslate"><span class="pre">int</span></code>, <code class="docutils literal notranslate"><span class="pre">str</span></code> that you have seen before. Which means that we can also write functions that take these objects as inputs. Let’s define a function that determines which car would win a race:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">racing_time</span><span class="p">(</span><span class="n">car_a</span><span class="p">,</span> <span class="n">car_b</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">car_a</span><span class="o">.</span><span class="n">speed</span> <span class="o">&gt;</span> <span class="n">car_b</span><span class="o">.</span><span class="n">speed</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The first car wins!&#39;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">car_b</span><span class="o">.</span><span class="n">speed</span> <span class="o">&gt;</span> <span class="n">car_a</span><span class="o">.</span><span class="n">speed</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The second car wins!&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Everyone is a winner&#39;</span><span class="p">)</span>
        
<span class="n">racing_time</span><span class="p">(</span><span class="n">jelmers_car</span><span class="p">,</span> <span class="n">dieuwertjes_car</span><span class="p">)</span>      
</pre></div>
</div>
</div>
</div>
<div class="tip admonition">
<p class="admonition-title">Exercise</p>
<p>Use these classes and methods and change the code such that Jelmer’s car wins.</p>
</div>
<div class="dropdown admonition">
<p class="admonition-title">Answer</p>
<div class="seealso admonition">
<p class="admonition-title">Answer</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">120</span><span class="p">):</span>
    <span class="n">jelmers_car</span><span class="o">.</span><span class="n">accelerate</span><span class="p">()</span>
    
<span class="n">racing_time</span><span class="p">(</span><span class="n">jelmers_car</span><span class="p">,</span> <span class="n">dieuwertjes_car</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>There are many nice things you can do with classes, and we’re not going to go into too many details here, but one thing that is useful to know is ‘inheritance’. Let’s say we want to make a very specific class for red Fiat cars and we’re also interested in the year that they were built. We can either make a completely new class, or reuse/inherit from our existing <code class="docutils literal notranslate"><span class="pre">car</span></code> class.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">FiatCar</span><span class="p">(</span><span class="n">Car</span><span class="p">):</span>
       
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">year</span><span class="p">):</span>
        <span class="n">Car</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">brand</span><span class="o">=</span><span class="s1">&#39;fiat&#39;</span><span class="p">)</span>        
        <span class="bp">self</span><span class="o">.</span><span class="n">year</span> <span class="o">=</span> <span class="n">year</span>    
</pre></div>
</div>
</div>
</div>
<p>We can now just instantiate an object of this class and as you see below, it has all the same attributes and methods as its parent class <code class="docutils literal notranslate"><span class="pre">Car</span></code>, plus a new one, <code class="docutils literal notranslate"><span class="pre">year</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_fiat</span> <span class="o">=</span> <span class="n">FiatCar</span><span class="p">(</span><span class="mi">1922</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">my_fiat</span><span class="o">.</span><span class="n">color</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">my_fiat</span><span class="o">.</span><span class="n">brand</span><span class="p">)</span>
<span class="n">my_fiat</span><span class="o">.</span><span class="n">accelerate</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">my_fiat</span><span class="o">.</span><span class="n">speed</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">my_fiat</span><span class="o">.</span><span class="n">year</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="dropdown admonition">
<p class="admonition-title">Answer</p>
<div class="seealso admonition">
<p class="admonition-title">Answer</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># For example</span>
<span class="k">class</span> <span class="nc">FormulaOneCar</span><span class="p">(</span><span class="n">Car</span><span class="p">):</span>
       
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="n">brand</span><span class="p">,</span> <span class="n">driver</span><span class="p">,</span> <span class="n">tires</span><span class="p">):</span>
        <span class="n">Car</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="n">brand</span><span class="o">=</span><span class="n">brand</span><span class="p">)</span>        
        <span class="bp">self</span><span class="o">.</span><span class="n">driver</span> <span class="o">=</span> <span class="n">driver</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tires</span> <span class="o">=</span> <span class="n">tires</span>
        
    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Toot toot I am very fast&#39;</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">box</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Time for a pit stop&#39;</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">tire_change</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tires</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tires</span> <span class="o">=</span> <span class="n">tires</span>
        
<span class="n">race_car</span> <span class="o">=</span> <span class="n">FormulaOneCar</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">brand</span><span class="o">=</span><span class="s1">&#39;red bull&#39;</span><span class="p">,</span> <span class="n">driver</span><span class="o">=</span><span class="s1">&#39;verstappen&#39;</span><span class="p">,</span> <span class="n">tires</span><span class="o">=</span><span class="s1">&#39;medium&#39;</span><span class="p">)</span>
<span class="n">race_car</span><span class="p">()</span>
<span class="n">race_car</span><span class="o">.</span><span class="n">box</span><span class="p">()</span>
<span class="n">race_car</span><span class="o">.</span><span class="n">tire_change</span><span class="p">(</span><span class="s1">&#39;hard&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">race_car</span><span class="o">.</span><span class="n">tires</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="tuples-lists-and-sets">
<h2>Tuples, lists and sets<a class="headerlink" href="#tuples-lists-and-sets" title="Permalink to this heading">#</a></h2>
<p>Sometimes (or actually quite often), we want to store multiple values in one variable. In that case, Python has several options. We can make either a <code class="docutils literal notranslate"><span class="pre">tuple</span></code>, a <code class="docutils literal notranslate"><span class="pre">list</span></code> or a <code class="docutils literal notranslate"><span class="pre">set</span></code>. It’s good to realize that these are just built-in classes, which means that they also have attributed and methods. There are some important differences between tuples, lists and sets, and depending on the situation you might want to use one or the other. Differences are nicely explained in the figure below:</p>
<ul class="simple">
<li><p><strong>Mutable</strong>: Once the variable has been made, can we still change it?</p></li>
<li><p><strong>Ordered</strong>: Is there a particular order of the elements that is kept?</p></li>
<li><p><strong>Indexing/slicing</strong>: Can we ask what is in, e.g., position 3?</p></li>
<li><p><strong>Duplicate elements</strong>: Can the variable contain multiple elements with the same value?</p></li>
</ul>
<p><img src='https://miro.medium.com/v2/resize:fit:1134/format:webp/1*WMiNIQ9THariDSJw47uU1w.png'></src></p>
<p>A tuple is made using parentheses <code class="docutils literal notranslate"><span class="pre">a_tuple</span> <span class="pre">=</span> <span class="pre">(1,</span> <span class="pre">2,</span> <span class="pre">3)</span></code>, a list using square brackets <code class="docutils literal notranslate"><span class="pre">a_list</span> <span class="pre">=</span> <span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3]</span></code>, and a set using curly brackets <code class="docutils literal notranslate"><span class="pre">a_set</span> <span class="pre">=</span> <span class="pre">{1,</span> <span class="pre">2,</span> <span class="pre">3}</span></code>.</p>
<p>Now let’s make a tuple, list, and set and see these differences in action.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a_tuple</span> <span class="o">=</span> <span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">a_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">12</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>
<span class="n">a_set</span> <span class="o">=</span> <span class="p">{</span><span class="mi">12</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p>Let’s first look at mutability. We can change the list and set by appending values. This works slightly differently for lists and sets, but is impossible for tuples.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a_list</span> <span class="o">+=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">a_list</span><span class="p">)</span>

<span class="n">a_set</span> <span class="o">|=</span> <span class="p">{</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">}</span>
<span class="nb">print</span><span class="p">(</span><span class="n">a_set</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>As you probably notice, the elements have been added to the list as well as to the set, but the order of the set has changed. A set is an unordered data structure, so it does not preserve any order we give to its elements. Instead, if we print the set, we just get its element, sorted in ascending order. For the list, the order that we give is preserved. Similarly for the tuple. This also affects indexing: because there is no order in the set, we cannot ask fo the <span class="math notranslate nohighlight">\(n\)</span>th item. However, we can do this for the list and tuple:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">a_list</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">a_tuple</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">a_set</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<p>Finally, as the table indicated, sets cannot have duplicate elements. Because there’s no order, there would be no way to keep two duplicated apart. This is not a problem for the list and tuple though:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">a_tuple</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="n">a_set</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">}</span>

<span class="nb">print</span><span class="p">(</span><span class="n">a_list</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">a_tuple</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">a_set</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>List, tuples, and sets have all kinds of built-in functions, and can also be cast into one another. One useful built-in function is <code class="docutils literal notranslate"><span class="pre">in</span></code>. For example, if we want to check if the value <code class="docutils literal notranslate"><span class="pre">3</span></code> appears in <code class="docutils literal notranslate"><span class="pre">a_list</span></code>, we can just write:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="mi">3</span> <span class="ow">in</span> <span class="n">a_list</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="dictionaries">
<h2>Dictionaries<a class="headerlink" href="#dictionaries" title="Permalink to this heading">#</a></h2>
<p>One last Python thing that we want to tell you (for know) is about dictionaries. Dictionaries are a very convenient way to keep tracks of <em>keys</em> and <em>values</em>. In a way, you can think of dictionaries as a set with indexing, where you can define your own kinds of indices. A typical dictionary is defined as below, and as you see, we can ask for the value of specific elements in the dictionary.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">8</span><span class="p">}</span>
<span class="n">a_dict</span><span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>For example, we can make a dictionary with the cars that we have just defined and use names as keys.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cars</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Jelmer&#39;</span><span class="p">:</span> <span class="n">jelmers_car</span><span class="p">,</span> <span class="s1">&#39;Dieuwertje&#39;</span><span class="p">:</span> <span class="n">dieuwertjes_car</span><span class="p">}</span>
<span class="n">racing_time</span><span class="p">(</span><span class="n">cars</span><span class="p">[</span><span class="s1">&#39;Jelmer&#39;</span><span class="p">],</span> <span class="n">cars</span><span class="p">[</span><span class="s1">&#39;Dieuwertje&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<p>There is no reason to restrict the dictionary keys or values to a specific type, we can mix and match types.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mixed_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Jelmer&#39;</span><span class="p">:</span> <span class="n">jelmers_car</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="s1">&#39;b&#39;</span><span class="p">}</span>
<span class="n">mixed_dict</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="dropdown admonition">
<p class="admonition-title">Answer</p>
<div class="seealso admonition">
<p class="admonition-title">Answer</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">study_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Pete&#39;</span><span class="p">:</span> <span class="s1">&#39;math&#39;</span><span class="p">,</span> <span class="s1">&#39;Derek&#39;</span><span class="p">:</span> <span class="s1">&#39;physics&#39;</span><span class="p">,</span> <span class="s1">&#39;Anne&#39;</span><span class="p">:</span> <span class="s1">&#39;bme&#39;</span><span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="working-with-medical-images">
<h1>Working with medical images<a class="headerlink" href="#working-with-medical-images" title="Permalink to this heading">#</a></h1>
<p>Now let’s put all this Python magic to some good use and see how we can use it to load and manipulate medical images. Medical image file formats are plenty. Most medical imaging devices store images in DICOM format, but you will also see Nifti, MetaImage (MHD), or NRRD files. What many image formats have in common is that they contain <em>meta information</em>. This is information about, e.g., the physical size of a pixel or voxel in the image, the origin of the image in world coordinates, a rotation matrix to correct for patient orientation, and even information about the CT/MRI scanner that is used and its settings. We’re typically not interested in all this information or <em>tags</em>, but some of it is indispensable for image analysis.</p>
<p>In this tutorial, you learn to</p>
<ul class="simple">
<li><p>Load the provided images</p></li>
<li><p>Extract their physical voxel size</p></li>
<li><p>Convert the image to a NumPy <code class="docutils literal notranslate"><span class="pre">ndarray</span></code> object</p></li>
<li><p>Visualize the image</p></li>
</ul>
<p>Let’s first import some of the packages used in this part of the tutorial. A package is just a collection of Python classes and functions that extend the standard built-in Python functions and classes. You will need some medical images to do this tutorial. You can download these from the <a class="reference external" href="https://surfdrive.surf.nl/files/index.php/s/vnA6J0xAhyzoYuz">SURFdrive directory</a>. Once you have downloaded the data for Tutorial 1, add the path in the box below. Note that this is slightly different for Jupyter and Colab. In <strong>Jupyter</strong>, you just add the local path where you’re stored the data. In <strong>Colab</strong>, there are <a class="reference external" href="https://colab.research.google.com/notebooks/io.ipynb">several ways to use files</a>. It might be easiest to put the data on your Google Drive.</p>
<p>For example, to add a path in Jupyter, do the following</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">data_path</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;/Users/jmwolterink/Downloads/Tutorial_1&#39;</span>
</pre></div>
</div>
</div>
</div>
<p>To add a path in Google Colab, do the following</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">google.colab</span> <span class="kn">import</span> <span class="n">drive</span>

<span class="n">drive</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="s1">&#39;/content/drive&#39;</span><span class="p">)</span>
<span class="n">data_path</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;/content/drive/My Drive/WHEREDIDYOUPUTTHEDATA?&#39;</span>
</pre></div>
</div>
</div>
</div>
<section id="python-packages">
<h2>Python packages<a class="headerlink" href="#python-packages" title="Permalink to this heading">#</a></h2>
<p>Some of the packages we’ll primarily use in the course tutorials are</p>
<ul class="simple">
<li><p><a class="reference external" href="https://numpy.org/">NumPy</a>. This is a widely used package for linear algebra, i.e., working with vectors, matrices, and tensors in Python. These are called arrays in NumPy and you’ll see them all over the place.</p></li>
<li><p><a class="reference external" href="https://simpleitk.org/">SimpleITK</a>. While there are many Python packages that will let you read a medical image or apply some functions to the image, none of them have the versatility that SimpleITK has. This is because it is based on ITK (Insight ToolKit), one of the oldest and most widely used image processing toolkits.</p></li>
<li><p><a class="reference external" href="https://matplotlib.org/">Matplotlib</a>. This package allows you to make plots and visualize images.</p></li>
<li><p><a class="reference external" href="https://pytorch.org/">PyTorch</a>. PyTorch is one of the primary and most popular Python packages used for deep learning. It has all kinds of nice features that make it (relatively) easy to design and train a neural network.</p></li>
<li><p><a class="reference external" href="https://monai.io/">MONAI</a>. MONAI is a PyTorch extension that is specifically designed for developing deep learning methods on medical images. Because it has a lot of built-in functionality, it will make your life a lot easier.</p></li>
</ul>
<p>Because not all of these packages might be installed by default (depending on your Python distribution),  you first need to install some packages.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">SimpleITK</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">matplotlib</span>
</pre></div>
</div>
</div>
</div>
<p>After that, we can import each package. This allows us to (significantly) extend the functionality of Python. Instead of just using its built-in functions, we now have access to a whole range of additional classes and functions.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">SimpleITK</span> <span class="k">as</span> <span class="nn">sitk</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">os</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="loading-an-image">
<h2>Loading an image<a class="headerlink" href="#loading-an-image" title="Permalink to this heading">#</a></h2>
<p>We first load an image that is stored in MetaImage format. In this format, an image always consists of two files: one header file (.mhd) that contains the image information, and one data file (.raw or .zraw) that contains the actual image data. The header file is human readable. We can print its contents here. Take a look at the attributes that are included in the meta information for a typical image.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">image_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_path</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;TEV1P1CTI.mhd&#39;</span><span class="p">)</span>  

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">image_file</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
</pre></div>
</div>
</div>
</div>
<div class="tip admonition">
<p class="admonition-title">Exercise</p>
<p>Infer from the header information if this is a 2D or a 3D image.</p>
</div>
<div class="dropdown admonition">
<p class="admonition-title">Answer</p>
<div class="seealso admonition">
<p class="admonition-title">Answer</p>
<p>The <code class="docutils literal notranslate"><span class="pre">NDims</span></code> tag says that this is a 3D image. It’s also clear from, e.g., <code class="docutils literal notranslate"><span class="pre">DimSize</span></code> and <code class="docutils literal notranslate"><span class="pre">ElementSpacing</span></code>, which would otherwise have only two values.</p>
</div>
</div>
<p>There are all kinds of tags in this header file that are relevant for the way in which the image is read. However, the nice thing is that we can also directly read this header file into a SimpleITK <code>Image</code> object. The image reader will read all meta information into the <code>Image</code> object and also load the pixel values from the data file.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">image</span> <span class="o">=</span> <span class="n">sitk</span><span class="o">.</span><span class="n">ReadImage</span><span class="p">(</span><span class="n">image_file</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>You can then use methods in this object to retrieve the properties that are in the header file. For example using the following queries.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">image</span><span class="o">.</span><span class="n">GetSize</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">image</span><span class="o">.</span><span class="n">GetOrigin</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">image</span><span class="o">.</span><span class="n">GetSpacing</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">image</span><span class="o">.</span><span class="n">GetDirection</span><span class="p">())</span>
</pre></div>
</div>
</div>
</div>
<p>Now we know that the image has a particular size, we can also find the value of a pixel in that image. For this, we can use the <code>GetPixel</code> method, and we can use <code>SetPixel</code> to change values.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">image</span><span class="o">.</span><span class="n">GetPixel</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">image</span><span class="o">.</span><span class="n">SetPixel</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Of course, setting and getting individual pixels is all quite cumbersome and this is not the optimal way to work with the 3D image matrix. Luckily, we can also read the raw pixel values into a NumPy array. For this, we use the <code>GetArrayFromImage</code> method.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">image_array</span> <span class="o">=</span> <span class="n">sitk</span><span class="o">.</span><span class="n">GetArrayFromImage</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>This is where things become a little bit tricky. If you print the shape of the <code>image_array</code> array, you will see that it doesn’t match that of the SimpleITK Image.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">image_array</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>While (Simple)ITK orders images as <code>(x, y, z)</code>, NumPy orders arrays as <code>(z, y, x)</code>. This is something to keep in mind and you can do two things:</p>
<ul class="simple">
<li><p>Just accept it and index your NumPy arrays in order <code>(z, y, x)</code>.</p></li>
<li><p>After you get your array, swap the x and y axes as follows</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">image_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">swapaxes</span><span class="p">(</span><span class="n">image_array</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="tip admonition">
<p class="admonition-title">Exercise</p>
<p>What is the new shape of <code class="docutils literal notranslate"><span class="pre">image_array</span></code>?</p>
</div>
<div class="dropdown admonition">
<p class="admonition-title">Answer</p>
<div class="seealso admonition">
<p class="admonition-title">Answer</p>
<p><code class="docutils literal notranslate"><span class="pre">print(image_array.shape)</span></code>
Answer: The new shape is (512, 512, 64)</p>
</div>
</div>
<section id="physical-voxel-size">
<h3>Physical voxel size<a class="headerlink" href="#physical-voxel-size" title="Permalink to this heading">#</a></h3>
<p>The image that you have loaded has some peculiarities. It is a CT image of the heart which has been acquired with (relatively) thick slices.</p>
<div class="tip admonition">
<p class="admonition-title">Exercise</p>
<p>Determine - based on the functions that you’ve seen here - what the ratio is between the slice spacing and the in-plane resolution?</p>
</div>
<div class="dropdown admonition">
<p class="admonition-title">Answer</p>
<div class="seealso admonition">
<p class="admonition-title">Answer</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">spacing</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">GetSpacing</span><span class="p">()</span>
<span class="n">ratio</span> <span class="o">=</span> <span class="n">spacing</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">/</span><span class="n">spacing</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ratio</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="tip admonition">
<p class="admonition-title">Exercise</p>
<p>What is the volume (in ml) of a single voxel in the image?</p>
</div>
<div class="dropdown admonition">
<p class="admonition-title">Answer</p>
<div class="seealso admonition">
<p class="admonition-title">Answer</p>
<p>Answer: To compute the volume in mm3, you multiply the spacing in three directions. To then get the volume in ml, you divide by 1000 (1 ml = 1 cm3). The answer then is ~0.0006 ml. Side note: this means that the full 3D CT image has a volume of ~10 liters.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">voxel_volume</span> <span class="o">=</span> <span class="mf">0.001</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">prod</span><span class="p">(</span><span class="n">spacing</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Volume is </span><span class="si">{}</span><span class="s1"> ml&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">voxel_volume</span><span class="p">))</span>

<span class="n">size</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">GetSize</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Full CT volume is </span><span class="si">{}</span><span class="s1"> l&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">prod</span><span class="p">(</span><span class="n">size</span><span class="p">)</span><span class="o">*</span><span class="n">voxel_volume</span><span class="o">*</span><span class="mf">0.001</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="visualizing-an-image">
<h2>Visualizing an image<a class="headerlink" href="#visualizing-an-image" title="Permalink to this heading">#</a></h2>
<p>So far, we have only considered the medical image as a 3D matrix, but we would also like to visualize it. Neither SimpleITK or NumPy provides functions to do this because that’s not their purpose. We can, however, use Matplotlib to visualize the NumPy array that we now have. Matplotlib provides a wide range of functionality and it will take you a long time to fully appreciate everything it offers. For now, we will look at some key functions that will help you in this course.</p>
<p>The code below plots a sine wave on 100 values between 0 and 20.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Matplotlib has many functions to display data. For images as 2D matrices, it doesn’t use the <code>plot</code> function, but the <code>imshow</code> function. If we visualize the 21st slice in our 64-slice CT image, we get the following image.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">image_array</span><span class="p">[:,</span> <span class="p">:,</span> <span class="mi">20</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Now we see what’s actually in the image. It’s a CT scan of a heart, where we see (on the left) the chest wall, in the center the heart, and on the right the spine. Surrounding the heart is lung tissue. However, if you would show the image like this to a radiologist, they would be confused. First of all, they are used to seeing CT images in grayscale. We can fix that by changing the <a class="reference external" href="https://matplotlib.org/stable/tutorials/colors/colormaps.html">Matplotlib colormap</a> to <code>gray</code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">image_array</span><span class="p">[:,</span> <span class="p">:,</span> <span class="mi">20</span><span class="p">],</span> <span class="n">cmap</span> <span class="o">=</span> <span class="s1">&#39;gray&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>A second problem is that the image is rotated 90 degrees counterclockwise. This is because when talking about images, we typically use different axes than when talking about plots. For example, coordinate (20, 10) in an image means 21st row (remember we start counting at 0), 11th column. In a plot, it would mean 21st <em>column</em>, 11th <em>row</em>. So to fix that, we need to swap axes in our visualization. Because the image slice is a 2D matrix, we can just use <code>transpose</code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">image_array</span><span class="p">[:,</span> <span class="p">:,</span> <span class="mi">20</span><span class="p">]</span><span class="o">.</span><span class="n">transpose</span><span class="p">(),</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>That’s more like it! Now, you may notice that the image does not show a lot of contrast. First of all, let’s see which image values are present in the image.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">image_array</span><span class="p">[:,</span> <span class="p">:,</span> <span class="mi">20</span><span class="p">]</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span> <span class="n">bins</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Hounsfield unit&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Count&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<section id="image-intensities">
<h3>Image intensities<a class="headerlink" href="#image-intensities" title="Permalink to this heading">#</a></h3>
<p>The histogram shows a wide range of image intensities (<a class="reference external" href="https://en.wikipedia.org/wiki/Hounsfield_scale">Hounsfield units</a>) in the image. For visualization, you might only be interested in values between 0 and 100.There are several ways to focus on different parts of the image.</p>
<ul class="simple">
<li><p>You can change the values in the image using something like <code>image_array = np.clip(image_array, 0, 100)</code></p></li>
<li><p>You can use the <code>vmin</code> and <code>vmax</code> options to limit the range of visible values.
The latter option is preferable as it doesn’t change the data.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">image_array</span><span class="p">[:,</span> <span class="p">:,</span> <span class="mi">20</span><span class="p">]</span><span class="o">.</span><span class="n">transpose</span><span class="p">(),</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="tip admonition">
<p class="admonition-title">Exercise</p>
<p>A reasonable range for non-contrast cardiac CT images is between -300 and 450. Visualize the image with these limits.</p>
</div>
<div class="dropdown admonition">
<p class="admonition-title">Answer</p>
<div class="seealso admonition">
<p class="admonition-title">Answer</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">image_array</span><span class="p">[:,</span> <span class="p">:,</span> <span class="mi">20</span><span class="p">]</span><span class="o">.</span><span class="n">transpose</span><span class="p">(),</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=-</span><span class="mi">300</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">450</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="tip admonition">
<p class="admonition-title">Exercise</p>
<p>The image that we have just visualized is an <em>axial</em> image slice. Can you also visualize a <em>sagittal</em> and a <em>coronal</em> image slice of the same 3D volume? Use the <a class="reference external" href="https://matplotlib.org/3.5.0/api/_as_gen/matplotlib.pyplot.imshow.html">aspect</a> option in Matplotlib to correct for the anisotropic pixel size.</p>
</div>
<div class="dropdown admonition">
<p class="admonition-title">Answer</p>
<div class="seealso admonition">
<p class="admonition-title">Answer</p>
<p>Here, you should use the ratio between slice spacing and in-plane resolution as your aspect ratio in the visualization to exactly match the physical size. If the aspect value is too low, the image gets squashed, if its too high, the image gets stretched. To select a sagittal slice, you index along the first dimension. To select a coronal slice, index along the second dimension. To show the image in the right oriëntation, you have to flip along the third (z) dimension using ::-1. Finally, to rotate the image, you can use transpose(). An example implementation is shown below.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">image_array</span><span class="p">[</span><span class="mi">255</span><span class="p">,</span> <span class="p">:,</span> <span class="p">:][:,</span> <span class="p">::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">transpose</span><span class="p">(),</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=-</span><span class="mi">300</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">450</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="n">image</span><span class="o">.</span><span class="n">GetSpacing</span><span class="p">()[</span><span class="mi">2</span><span class="p">]</span><span class="o">/</span><span class="n">image</span><span class="o">.</span><span class="n">GetSpacing</span><span class="p">()[</span><span class="mi">1</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">image_array</span><span class="p">[:,</span> <span class="mi">255</span><span class="p">,</span> <span class="p">:][:,</span> <span class="p">::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">transpose</span><span class="p">(),</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=-</span><span class="mi">300</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">450</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="n">image</span><span class="o">.</span><span class="n">GetSpacing</span><span class="p">()[</span><span class="mi">2</span><span class="p">]</span><span class="o">/</span><span class="n">image</span><span class="o">.</span><span class="n">GetSpacing</span><span class="p">()[</span><span class="mi">1</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="mevislab">
<h2>MeVisLab<a class="headerlink" href="#mevislab" title="Permalink to this heading">#</a></h2>
<p>This is the end of this first Jupyter notebook. Notebooks are great for interactive Python programming, but not for medical image visualization. We have put a tutorial on Canvas to get started with MeVisLab. Follow this tutorial to visualize 3D medical images in an interactive way!</p>
<p><img src='https://i.imgur.com/W0ZYWg0.png'></img></p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./notebooks/Tutorial1_NumpySimpleITK"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="../../index.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Welcome</p>
      </div>
    </a>
    <a class="right-next"
       href="../Tutorial2_ConvolutionalNeuralNetworks/Tutorial2_ConvolutionalNeuralNetworks_teacher.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Tutorial 2</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Tutorial 1</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#february-7-2025">February 7, 2025</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#notebooks">Notebooks</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#python-essentials">Python essentials</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#variables">Variables</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#functions">Functions</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#objects">Objects</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tuples-lists-and-sets">Tuples, lists and sets</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dictionaries">Dictionaries</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#working-with-medical-images">Working with medical images</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#python-packages">Python packages</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#loading-an-image">Loading an image</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#physical-voxel-size">Physical voxel size</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#visualizing-an-image">Visualizing an image</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#image-intensities">Image intensities</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#mevislab">MeVisLab</a></li>
</ul>
</li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Jelmer Wolterink
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2024.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>